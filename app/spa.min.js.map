{"version":3,"file":"spa.min.js","sources":["spa.js"],"names":["HomeCtrl","$scope","form_data","user_data","angular","module","controller","$inject","LoginCtrl","$state","userService","login","login_data","then","response","status","result","go","alert","LogoutCtrl","logout","RegisterCtrl","register","createUser","register_data","users","UsersCtrl","refreshUsers","getAllUsers","results","alerts","closeAlert","index","splice","delete_user","user","deleteUser","id","push","type","msg","indexOf","ViewUserCtrl","$stateParams","getByIdUser","restApiFactory","$http","$q","connect","config","deferred","defer","success","data","resolve","error","e","reject","promise","services","factory","serializeFormPostData","transformRequest","getHeaders","headers","serializeData","isObject","toString","buffer","name","hasOwnProperty","value","encodeURIComponent","source","join","replace","req","url","api_url","method","getPaginateUsers","pageNumber","updateUser","this","service"],"mappings":"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","sourcesContent":["(function() {\r\n    'use strict';\r\n\r\n    angular\r\n\t\t.module('spa')\r\n\t\t.controller('HomeCtrl',HomeCtrl);\r\n\r\n\tHomeCtrl.$inject = ['$scope'];\r\n\r\n\tfunction HomeCtrl($scope){\r\n\r\n\t\t$scope.form_data = user_data;\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n\t\t.module('spa')\r\n\t\t.controller('LoginCtrl',LoginCtrl);\r\n\r\n\tLoginCtrl.$inject = ['$scope','$state','userService'];\t\r\n\r\n\tfunction LoginCtrl($scope,$state,userService){\r\n\r\n\t\t$scope.login_data = {};\r\n\t\t$scope.login = login;\r\n\r\n\t\tfunction login(){\r\n\t\t\tuserService.login($scope.login_data).then(function(response){\r\n\t\t\t\tif( response.status == 200 ){\r\n\t\t\t\t\tuser_data = response.result;\r\n\t\t\t\t\t$state.go('home');\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\talert(\"Oops!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.controller('LogoutCtrl',LogoutCtrl);\r\n\r\n\tLogoutCtrl.$inject = ['$scope','$state'];\t\r\n\r\n\tfunction LogoutCtrl($scope,$state){\r\n\r\n\t\t$scope.logout = logout;\r\n\r\n\t\tfunction logout(){\r\n\t\t\tuser_data = {};\r\n\t\t\t$state.go('/');\r\n\t\t};\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.controller('RegisterCtrl',RegisterCtrl);\r\n\r\n\tRegisterCtrl.$inject = ['$scope','$state','userService'];\t\r\n\r\n\tfunction RegisterCtrl($scope,$state,userService){\r\n\r\n\t\t$scope.register_data = {};\r\n\t\t$scope.users = [];\r\n\t\t$scope.register = register;\r\n\r\n\t\tfunction register(){\r\n\t\t\tuserService.createUser($scope.register_data).then(function(response){\r\n\t\t\t\tif( response.status == 200 ){\r\n\t\t\t\t\tuser_data = $scope.register_data;\r\n\t\t\t\t\t$state.go('home');\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\talert(\"Oops!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.controller('UsersCtrl',UsersCtrl);\r\n\r\n\tUsersCtrl.$inject = ['$scope','userService'];\r\n\r\n\tfunction UsersCtrl($scope,userService){\r\n\r\n\t \t$scope.users = [];\r\n\t\t$scope.alerts = [];\r\n\r\n\t\trefreshUsers();\r\n\r\n\t\tfunction refreshUsers(){\r\n\t\t\tuserService.getAllUsers().then(function(results){\r\n\t\t\t\t$scope.users = results;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.closeAlert = function(index) {\r\n\t    \t$scope.alerts.splice(index, 1);\r\n\t  \t};\r\n\t  \t\r\n\t\t$scope.delete_user = function(user){\r\n\t\t\tuserService.deleteUser(user.id).then(function(result){\r\n\t\t\t\tif(result.status == 200){ \r\n\t\t\t\t\t$scope.alerts.push({type: 'success',msg: 'Successfully deleted!'});\r\n\t\t\t\t\t$scope.users.splice( $scope.users.indexOf(user), 1 );\r\n\t\t\t\t\trefreshUsers();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.controller('ViewUserCtrl',ViewUserCtrl);\r\n\r\n\tViewUserCtrl.$inject = ['$scope','$stateParams','userService'];\r\n\r\n\tfunction ViewUserCtrl($scope,$stateParams,userService){\r\n\r\n\t\t$scope.user = {};\r\n\r\n\t\tuserService.getByIdUser($stateParams.id).then(function(result){\r\n\t\t\t$scope.user = result;\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.factory('restApiFactory', restApiFactory);\r\n\r\n\trestApiFactory.$inject = ['$http','$q'];\r\n\r\n\tfunction restApiFactory($http,$q){\r\n\r\n\t\tvar services = {\r\n\t\t\tconnect : connect\r\n\t\t}\r\n\t\treturn services;\r\n\r\n\t\tfunction connect(config){\r\n\t\t    var deferred = $q.defer();\r\n\t\t    $http(config)\r\n\t\t        .success(function (data) {\r\n\t\t            deferred.resolve(data);\r\n\t\t        })\r\n\t\t        .error(function (e) {\r\n\t\t            deferred.reject(e);\r\n\t\t        });\r\n\t\t    return deferred.promise;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.factory('serializeFormPostData', serializeFormPostData);\r\n\t\t\r\n\tfunction serializeFormPostData() {\r\n\r\n\t\tfunction transformRequest( data, getHeaders ) {\r\n\r\n\t\t\tvar headers = getHeaders();\r\n\r\n\t\t\theaders[ \"Content-type\" ] = \"application/x-www-form-urlencoded; charset=utf-8\";\r\n\r\n\t\t\treturn( serializeData( data ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn( transformRequest );\r\n\r\n\t\tfunction serializeData( data ) {\r\n\r\n\t\t\tif ( ! angular.isObject( data ) ) {\r\n\r\n\t\t\t\treturn( ( data == null ) ? \"\" : data.toString() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar buffer = [];\r\n\r\n\t\t\tfor ( var name in data ) {\r\n\r\n\t\t\t\tif ( ! data.hasOwnProperty( name ) ) {\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar value = data[ name ];\r\n\r\n\t\t\t\tbuffer.push(\r\n\t\t\t\t\tencodeURIComponent( name ) +\r\n\t\t\t\t\t\"=\" +\r\n\t\t\t\t\tencodeURIComponent( ( value == null ) ? \"\" : value )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar source = buffer\r\n\t\t\t\t.join( \"&\" )\r\n\t\t\t\t.replace( /%20/g, \"+\" )\r\n\t\t\t;\r\n\r\n\t\t\treturn( source );\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n})();\t\r\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('spa')\r\n        .service('userService', userService);\r\n\r\n    userService.$inject = ['$http','serializeFormPostData','restApiFactory'];\r\n\r\n    function userService($http,serializeFormPostData,restApiFactory){\r\n\r\n        this.getAllUsers = getAllUsers;\r\n        this.getByIdUser = getByIdUser;\r\n        this.getPaginateUsers = getPaginateUsers;\r\n        this.createUser = createUser;\r\n        this.updateUser = updateUser;\r\n        this.deleteUser = deleteUser;\r\n        this.login = login;\r\n\r\n        ////////////////\r\n\r\n        function getAllUsers(){\r\n            var req = {\r\n                url: api_url+'users.php',\r\n                method: 'GET',\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function getByIdUser(id){\r\n            var req = {\r\n                url: api_url+'users.php?user_id='+id,\r\n                method: 'GET',\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function getPaginateUsers(page_number){\r\n            var req = {\r\n                url: api_url+'users.php?page_number='+pageNumber,\r\n                method: 'GET',\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function createUser(data){\r\n            var req = {\r\n                url: api_url+'create_user.php',\r\n                method: 'POST',\r\n                transformRequest: serializeFormPostData,\r\n                data: data\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function updateUser(id,data){\r\n            var req = {\r\n                url: api_url+'update_user.php?user_id='+id,\r\n                method: 'POST',\r\n                transformRequest: serializeFormPostData,\r\n                data: data,\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function deleteUser(id){\r\n            var req = {\r\n                url: api_url+'delete_user.php?user_id='+id,\r\n                method: 'GET',\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function login(data){\r\n            var req = {\r\n                url: api_url+'login.php',\r\n                method: 'POST',\r\n                transformRequest: serializeFormPostData,\r\n                data: data,\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n    }\r\n\r\n})();"]}