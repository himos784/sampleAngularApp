{"version":3,"file":"spa.min.js","sources":["spa.js"],"names":["user_data","api_url","angular","module","config","$stateProvider","$urlRouterProvider","otherwise","state","url","views","templateUrl","login@/","controller","register@/","users@home","HomeCtrl","$scope","form_data","$inject","LoginCtrl","$state","userService","login","login_data","then","response","status","result","go","alert","LogoutCtrl","logout","RegisterCtrl","register","createUser","register_data","users","UsersCtrl","refreshUsers","getAllUsers","results","alerts","closeAlert","index","splice","delete_user","user","deleteUser","id","push","type","msg","indexOf","ViewUserCtrl","$stateParams","getByIdUser","restApiFactory","$http","$q","connect","deferred","defer","success","data","resolve","error","e","reject","promise","services","factory","serializeFormPostData","transformRequest","getHeaders","headers","serializeData","isObject","toString","buffer","name","hasOwnProperty","value","encodeURIComponent","source","join","replace","req","method","getPaginateUsers","pageNumber","updateUser","this","service"],"mappings":"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","sourcesContent":["var user_data = {};\r\n\r\nvar api_url = \"http://localhost/angular_api/\";\t\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n    \t.module('spa', [\r\n\t    \t'ngRoute',\r\n\t    \t'ui.router',\r\n\t    \t'ui.bootstrap'\r\n    \t]);\r\n})();\r\n\r\n\r\n(function() {\r\n    'use strict';\r\n    \r\n    angular\r\n        .module('spa')\r\n        .config(function($stateProvider, $urlRouterProvider,$httpProvider) {\r\n            $urlRouterProvider.otherwise('/');\r\n            \r\n            $stateProvider\r\n            .state('/', {\r\n                url: '/',\r\n            \tviews: {\r\n            \t\t'': { \r\n            \t\t\ttemplateUrl: 'partials/landing/landing-page.html' \r\n            \t\t},\r\n            \t\t'login@/': { \r\n            \t\t\ttemplateUrl: 'partials/landing/login.html',\r\n            \t\t\tcontroller: 'LoginCtrl'\r\n            \t\t},\r\n            \t\t'register@/': { \r\n            \t\t\ttemplateUrl: 'partials/landing/register.html',\r\n            \t\t\tcontroller: 'RegisterCtrl' \r\n            \t\t}\r\n            \t}\r\n            })\r\n            .state('home',{\r\n            \turl: '/home',\r\n            \tviews: {\r\n            \t\t'': {\r\n            \t\t\ttemplateUrl: 'partials/home/home.html',\r\n                        controller: 'HomeCtrl',\r\n            \t\t},\r\n                    'users@home': { \r\n                        templateUrl: 'partials/home/users-table.html',\r\n                        controller: 'UsersCtrl' \r\n                    }\r\n            \t}\r\n            })\r\n            .state('view-user',{\r\n                url: '/user/:id',\r\n                templateUrl: 'partials/user/view.html',\r\n                controller: 'ViewUserCtrl'\r\n            })\r\n            .state('delete-user',{\r\n                url: '/user/delete/:id',\r\n                controller: 'DeleteUserCtrl'\r\n            })\r\n            .state('logout',{\r\n                url: '/logout',\r\n                views: {\r\n                    '': { \r\n                        templateUrl: 'partials/landing/landing-page.html' \r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n\t\t.module('spa')\r\n\t\t.controller('HomeCtrl',HomeCtrl);\r\n\r\n\tHomeCtrl.$inject = ['$scope'];\r\n\r\n\tfunction HomeCtrl($scope){\r\n\r\n\t\t$scope.form_data = user_data;\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n\t\t.module('spa')\r\n\t\t.controller('LoginCtrl',LoginCtrl);\r\n\r\n\tLoginCtrl.$inject = ['$scope','$state','userService'];\t\r\n\r\n\tfunction LoginCtrl($scope,$state,userService){\r\n\r\n\t\t$scope.login_data = {};\r\n\t\t$scope.login = login;\r\n\r\n\t\tfunction login(){\r\n\t\t\tuserService.login($scope.login_data).then(function(response){\r\n\t\t\t\tif( response.status == 200 ){\r\n\t\t\t\t\tuser_data = response.result;\r\n\t\t\t\t\t$state.go('home');\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\talert(\"Oops!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.controller('LogoutCtrl',LogoutCtrl);\r\n\r\n\tLogoutCtrl.$inject = ['$scope','$state'];\t\r\n\r\n\tfunction LogoutCtrl($scope,$state){\r\n\r\n\t\t$scope.logout = logout;\r\n\r\n\t\tfunction logout(){\r\n\t\t\tuser_data = {};\r\n\t\t\t$state.go('/');\r\n\t\t};\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.controller('RegisterCtrl',RegisterCtrl);\r\n\r\n\tRegisterCtrl.$inject = ['$scope','$state','userService'];\t\r\n\r\n\tfunction RegisterCtrl($scope,$state,userService){\r\n\r\n\t\t$scope.register_data = {};\r\n\t\t$scope.users = [];\r\n\t\t$scope.register = register;\r\n\r\n\t\tfunction register(){\r\n\t\t\tuserService.createUser($scope.register_data).then(function(response){\r\n\t\t\t\tif( response.status == 200 ){\r\n\t\t\t\t\tuser_data = $scope.register_data;\r\n\t\t\t\t\t$state.go('home');\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\talert(\"Oops!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.controller('UsersCtrl',UsersCtrl);\r\n\r\n\tUsersCtrl.$inject = ['$scope','userService'];\r\n\r\n\tfunction UsersCtrl($scope,userService){\r\n\r\n\t \t$scope.users = [];\r\n\t\t$scope.alerts = [];\r\n\r\n\t\trefreshUsers();\r\n\r\n\t\tfunction refreshUsers(){\r\n\t\t\tuserService.getAllUsers().then(function(results){\r\n\t\t\t\t$scope.users = results;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.closeAlert = function(index) {\r\n\t    \t$scope.alerts.splice(index, 1);\r\n\t  \t};\r\n\t  \t\r\n\t\t$scope.delete_user = function(user){\r\n\t\t\tuserService.deleteUser(user.id).then(function(result){\r\n\t\t\t\tif(result.status == 200){ \r\n\t\t\t\t\t$scope.alerts.push({type: 'success',msg: 'Successfully deleted!'});\r\n\t\t\t\t\t$scope.users.splice( $scope.users.indexOf(user), 1 );\r\n\t\t\t\t\trefreshUsers();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.controller('ViewUserCtrl',ViewUserCtrl);\r\n\r\n\tViewUserCtrl.$inject = ['$scope','$stateParams','userService'];\r\n\r\n\tfunction ViewUserCtrl($scope,$stateParams,userService){\r\n\r\n\t\t$scope.user = {};\r\n\r\n\t\tuserService.getByIdUser($stateParams.id).then(function(result){\r\n\t\t\t$scope.user = result;\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.factory('restApiFactory', restApiFactory);\r\n\r\n\trestApiFactory.$inject = ['$http','$q'];\r\n\r\n\tfunction restApiFactory($http,$q){\r\n\r\n\t\tvar services = {\r\n\t\t\tconnect : connect\r\n\t\t}\r\n\t\treturn services;\r\n\r\n\t\tfunction connect(config){\r\n\t\t    var deferred = $q.defer();\r\n\t\t    $http(config)\r\n\t\t        .success(function (data) {\r\n\t\t            deferred.resolve(data);\r\n\t\t        })\r\n\t\t        .error(function (e) {\r\n\t\t            deferred.reject(e);\r\n\t\t        });\r\n\t\t    return deferred.promise;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n})();\r\n(function() {\r\n    'use strict';\r\n\r\n\tangular\r\n\t\t.module('spa')\r\n\t\t.factory('serializeFormPostData', serializeFormPostData);\r\n\t\t\r\n\tfunction serializeFormPostData() {\r\n\r\n\t\tfunction transformRequest( data, getHeaders ) {\r\n\r\n\t\t\tvar headers = getHeaders();\r\n\r\n\t\t\theaders[ \"Content-type\" ] = \"application/x-www-form-urlencoded; charset=utf-8\";\r\n\r\n\t\t\treturn( serializeData( data ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn( transformRequest );\r\n\r\n\t\tfunction serializeData( data ) {\r\n\r\n\t\t\tif ( ! angular.isObject( data ) ) {\r\n\r\n\t\t\t\treturn( ( data == null ) ? \"\" : data.toString() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar buffer = [];\r\n\r\n\t\t\tfor ( var name in data ) {\r\n\r\n\t\t\t\tif ( ! data.hasOwnProperty( name ) ) {\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar value = data[ name ];\r\n\r\n\t\t\t\tbuffer.push(\r\n\t\t\t\t\tencodeURIComponent( name ) +\r\n\t\t\t\t\t\"=\" +\r\n\t\t\t\t\tencodeURIComponent( ( value == null ) ? \"\" : value )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar source = buffer\r\n\t\t\t\t.join( \"&\" )\r\n\t\t\t\t.replace( /%20/g, \"+\" )\r\n\t\t\t;\r\n\r\n\t\t\treturn( source );\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n})();\t\r\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('spa')\r\n        .service('userService', userService);\r\n\r\n    userService.$inject = ['$http','serializeFormPostData','restApiFactory'];\r\n\r\n    function userService($http,serializeFormPostData,restApiFactory){\r\n\r\n        this.getAllUsers = getAllUsers;\r\n        this.getByIdUser = getByIdUser;\r\n        this.getPaginateUsers = getPaginateUsers;\r\n        this.createUser = createUser;\r\n        this.updateUser = updateUser;\r\n        this.deleteUser = deleteUser;\r\n        this.login = login;\r\n\r\n        ////////////////\r\n\r\n        function getAllUsers(){\r\n            var req = {\r\n                url: api_url+'users.php',\r\n                method: 'GET',\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function getByIdUser(id){\r\n            var req = {\r\n                url: api_url+'users.php?user_id='+id,\r\n                method: 'GET',\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function getPaginateUsers(page_number){\r\n            var req = {\r\n                url: api_url+'users.php?page_number='+pageNumber,\r\n                method: 'GET',\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function createUser(data){\r\n            var req = {\r\n                url: api_url+'create_user.php',\r\n                method: 'POST',\r\n                transformRequest: serializeFormPostData,\r\n                data: data\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function updateUser(id,data){\r\n            var req = {\r\n                url: api_url+'update_user.php?user_id='+id,\r\n                method: 'POST',\r\n                transformRequest: serializeFormPostData,\r\n                data: data,\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function deleteUser(id){\r\n            var req = {\r\n                url: api_url+'delete_user.php?user_id='+id,\r\n                method: 'GET',\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n        function login(data){\r\n            var req = {\r\n                url: api_url+'login.php',\r\n                method: 'POST',\r\n                transformRequest: serializeFormPostData,\r\n                data: data,\r\n            };\r\n            return restApiFactory.connect(req);\r\n        }\r\n\r\n    }\r\n\r\n})();"]}